/*
ng-i18n - git@github.com:kevinchappell/ng-i18n.git
Version: 1.1.2
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
angular.module("ngI18n",[]).provider("I18N",function(){"use strict";function n(n,t){var r=this,a={},o=n.lang||sessionStorage.getItem("locale")||e["default"].locale,u="#__locale__#",l="#__name__#",c={};return r.loaded=[],c.fromFile=function(n){for(var e,t=n.split("\n"),r={},a=0;a<t.length;a++)e=t[a].match(/^(.+?) *?= *?([^\n]+)/),e&&(r[e[1]]=e[2].replace(/^\s+|\s+$/,""));return r},c.processFile=function(e){var t=e.data;t.replace(/\n\n/g,"\n");var i=c.fromFile(t),s=i[u];o=s,a[s]||(a[s]=i,r.loaded.push({locale:s,name:i[l]})),n.lang=s},c.makeSafe=function(n){var e={"{":"\\{","}":"\\}","|":"\\|"};return n.replace(/\{|\}|\|/g,function(n){return e[n]})},r.getCurrent=function(){return o},r.getLangs=function(){return e.langs},r.loadLang=function(n){return t.get(e.langsDir+n,{cache:!0}).then(c.processFile)["catch"](function(n){throw console.error(n),n})},r.get=function(n){var e=a[o]&&a[o][n]||a["en-us"]&&a["en-us"][n]||n;return e},r.parseArgs=function(n,e){var t,a,o,u=r.get(n);if("string"==typeof u)return t=u.match(/\{[^\}]+?\}/g),"object"==typeof e?angular.forEach(t,function(n){a=n.substring(1,n.length-1),o=e[a],u=u.replace(new RegExp(c.makeSafe(n),"g"),o||"")}):u=u.replace(/\{[^\}]+?\}/g,e),u},r.setCurrent=function(n,e){var t=this.loadLang(n);t.then(function(t){return window.sessionStorage.setItem("locale",n),"function"==typeof e?e(t):void 0},function(n){console.error("Failed to set language: "+n)})},r.setCurrent(o),"test"===e.env&&(r.utils=c),r}var e={langsDir:"lang/","default":{locale:"en-us",name:"English"},langs:[{locale:"en-us",name:"English"},{locale:"pt-pt",name:"Portuguese"}]};this.config=function(n){return angular.extend(e,n)},this.$get=["$rootScope","$http",function(e,t){return new n(e,t)}]}),angular.module("ngI18n").directive("ngI18n",["I18N",function(n){"use strict";return{restrict:"E",scope:{key:"@"},link:function(e,t,r){function a(){o=n.parseArgs(r.key,r),t.html(o)}var o;e.$watch(a)}}}]),angular.module("ngI18n").filter("i18n",["I18N",function(n){"use strict";var e=function(e,t){return e?n.parseArgs(e,t):void 0};return e.$stateful=!0,e}]);